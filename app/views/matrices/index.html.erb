<%= link_to new_matrix_path, {:class => "btn btn-small", :style => "float:right;margin-top:10px"} do %>
	<i class="icon-plus"></i> New
<% end %>
<h1>Matrices</h1>

<div class="row-fluid sortable">
  <div class="box span12">
    <div class="box-content">
			<table class="table table-striped table-bordered bootstrap-datatable datatable">
				<thead>
					<tr>
						<th>Name</th>
						<th>Description</th>
						<th>Companies</th>
						<th>Keywords</th>
						<th>Actions</th>
					</tr>
				</thead>

				<tbody>
					<% @matrices.each do |matrix| %>
					<tr>
						<% if can? :read, matrix%>
						<td><%= link_to matrix.name, matrix %></td>
						<td class="center"><%= matrix.description %></td>
						<td class="center">
							<%= raw(matrix.companies.map{ |company| raw(link_to(company.name, company)) }.join(', ')) %>
						</td>	
						<td class="center"><%= matrix.matrix_keywords.map(&:name).join(', ') %></td>	
						<td class="center">
							<div class="btn-group">
								<% if can? :update, matrix%>
									<%= link_to edit_matrix_path(matrix), :class => "btn" do %>
									<i class="icon-edit"></i>
									<% end %>
								<% end %>
								
								<% if can? :update, matrix%>
									<%= link_to matrix, method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn" do %>
									<i class="icon-trash"></i>
									<% end %>
								<% end %>
							</div>
						</td>
						<% end %>
					</tr>
					<% end %>
				</tbody>
			</table>
		</div>
	</div><!--/span-->
</div><!--/row-->
